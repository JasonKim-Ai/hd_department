<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WX기초과정 실습 프롬프트</title>
    <link rel="stylesheet" href="../style.css"> 
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,700" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="./method.js"></script> 
</head>
<script>
// JSON 파일을 안전하게 불러오기 위해 jQuery AJAX를 사용합니다.
$(document).ready(function(){
    // data.json 파일을 불러옵니다.
    $.getJSON('data.json', function(data) {
        // 데이터 로드 성공 후, 왼쪽 메뉴를 만듭니다.
        makeLeftSide(data);
        console.log("Data loaded successfully.");

        $(document).on("click", ".prompt_button", function(){
            $(".prompt_button").css({"color" : "", "background":"", "font-weight":""});
            // data 변수는 이제 전역 스코프가 아닌 이 콜백 함수 내에 있습니다.
            // 버튼 클릭 시 데이터를 찾기 위한 로직을 수정했습니다.
            let chapterKey = $(this).attr("chapter");
            let promptName = $(this).text();
            
            // 데이터가 있는지 확인하고 오른쪽 화면에 보여줍니다.
            if (data[chapterKey] && data[chapterKey][promptName]) {
                var prompt = data[chapterKey][promptName];
                showRightSide(prompt);
            } else {
                showRightSide("내용을 찾을 수 없습니다.");
            }
            
            $(this).css({"color": "white", "background": "rgb(25 183 255)", "font-weight":"bold"});
            $("html").animate({scrollTop:0}, 500);
        });
        
    }).fail(function(jqxhr, textStatus, error) {
        // 데이터 로드 실패 시 콘솔에 에러를 표시합니다.
        let err = textStatus + ", " + error;
        console.error( "Request Failed: " + err );
        alert("🚨 data.json 파일을 불러오는 데 실패했습니다. 파일이 같은 폴더에 있는지 확인해주세요.");
    });


    $(document).on("click", ".copy_icon", function(){
        // br2nl 함수는 method.js에 정의되어 있어야 합니다.
        copyToClipboard($(this).prev().html().br2nl());
    });
});
</script>
<body oncontextmenu="return false" onselectstart="return false" ondragstart="return false">
    <div id="container">
        <div id="leftside"></div> 
        <div id="rightside">
            <div id="rightSideWrapper">
                <div><img src="../logo_wx.svg" alt="Logo"></div> 
                <div>왼쪽 메뉴에서 내용을 클릭해 주세요.</div>
            </div>
        </div>
    </div>
</body>
</html>
